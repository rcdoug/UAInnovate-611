<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/styles.css">
    <title>HR Portal</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function (){
            $("#searchForm").submit(function (event){
                event.preventDefault();
                console.log("working");    
                fetch("applicants.json")
                    .then(response => response.json())
                    .then(jsonData =>{
                        jsonData.applicants.forEach(applicant =>{
                            if(applicant.email == document.getElementById('searchVal').value){
                                const stdNameOld = applicant.name;
                                const stdEmailOld = applicant.email;
                                const stdDateOld = applicant.date;
                                const stdLocationOld = applicant.location;
                                const stdPhoneOld = applicant.phone;
                                const stdLinkedInOld = applicant.LinkedIn;
                                const stdProgressOld = applicant.progress;
                                const stdGaugeOld = applicant.gague;
                                const stdFeedbackOld = applicant.feedback;
                                const stdSchoolOld = applicant.school;
                                const stdRoleOld = applicant.role;
                            
                                document.getElementById("stdName").value = stdNameOld;
                                document.getElementById("stdEmail").value = stdEmailOld;
                                document.getElementById("stdDate").value = stdDateOld;
                                document.getElementById("stdLocation").value = stdLocationOld;
                                document.getElementById("stdPhone").value = stdPhoneOld;
                                document.getElementById("stdLinkedIn").value = stdLinkedInOld;
                                document.getElementById("stdProgress").value = stdProgressOld;
                                document.getElementById("stdInterest").value = stdGaugeOld;
                                document.getElementById("stdSchool").value = stdSchoolOld;
                                document.getElementById("stdRole").value = stdRoleOld;

                                document.getElementById('hiddenForm').style.display = 'block';
                            }
                        })
                    })
            })
        })
    </script>
</head>
<body>

    <header>
        <div id="expand-box-header">
            <a href="index.html">
                <h1><span style="float: left; color: #e31937">CGI</span></h1> 
            </a>
            <h1><span style="float: right;">HR Search</span></h1>
            <div style="clear:both;"></div>
        </div>
    </header>

    <div class="searchDiv">
        <form id="searchForm" action="">
            <label for="searchVal">Enter Email of Profile:</label>
            <input type="text" id="searchVal" name="searchVal" placeholder="name@address.dom" required>
            <br>
            <input type="submit" value="Search Accounts">
        </form>
    </div>  

    <div id="hiddenForm">
        <form action="/edit-form" method = "post">
            <label for="stdName">Enter Name:</label>
            <input type="text" id="stdName" name="stdName" placeholder="Enter Name" required>
            <br><br>
            <label for="stdEmail">Enter Email:</label>
            <input type="text" id="stdEmail" name="stdEmail" placeholder="Enter Email" required>
            <br><br>
            <label for="stdDate">Enter Graduation Date</label>
            <input type="text" id="stdDate" name="stdDate" placeholder="MM/YY" required>
            <br><br>
            <label for="stdLocation">Choose a location:</label>
            <br>
            <select name="question" id="stdLocation" required>
                <option value="Location Place Holder 1">Location Place Holder 1</option>
                <option value="Location Place Holder 2">Location Place Holder 2</option>
                <option value="Location Place Holder 3">Location Place Holder 3</option>
            </select>
            <br><br>
            <label for="stdPhone">Enter phone number:</label>
            <input type="text" id="stdPhone" name="stdPhone" placeholder="xxx-xxx-xxxx" required>
            <br><br>
            <label for="stdSchool">Enter School:</label>
            <input type="text" id="stdSchool" name="stdSchool" placeholder="School Name, ST" required>
            <br><br>
            <label for="stdRole">Enter Role Applying For:</label>
            <input type="text" id="stdRole" name="stdRole" placeholder="Enter Role" required>
            <br><br>
            <label for="stdLinkedIn">Enter LinkedIn URL</label>
            <input type="text" id="stdLinkedIn" name="stdLinkedIn" placeholder="Enter LinkedIn URL">
            <br><br>
            <label for="stdResume">Upload Resume PDF</label>
            <input type="file" id="stdResume" name="stdResume" placeholder="Upload Resume PDF">
            <br><br>
            <label for="stdProgress">Select Candidate Progress</label>
            <select name="question" id="stdProgress" required>
                <option value="N/A">Unselected</option>
                <option value="Uninterviewed">Uninterviewed</option>
                <option value="Completed First Interview">Completed First Interview</option>
                <option value="Completed Final Interview">Completed Final Interview</option>
            </select>
            <br><br>
            <label for="stdInterest">Enter interest in Candidate</label>
            <input type="text" id="stdInterest" name="stdInterest" placeholder="Enter Interest in Candidate (0-5)">
            <br><br>
            <input type="submit" value="Submit the form">
        </form>
    </div>
</body>
</html>